!function(){"use strict";function e(){return{bindToController:!0,controller:i,controllerAs:"$stepCore",link:function(e,t,i,s){if(document.onkeydown=function(t){(!document.activeElement||"SELECT"!=document.activeElement.nodeName&&"TEXTAREA"!=document.activeElement.nodeName)&&("38"==(t=t||window.event).keyCode?s.stepLista[0].id!==s.idSelecionado&&e.$apply(s.steps.anterior()):"40"==t.keyCode&&s.stepLista[s.stepLista.length-1].id!==s.idSelecionado&&e.$apply(s.steps.proximo()))},e.$on("$destroy",function(){document.onkeydown=function(){}}),!document.getElementById("ngsteps-style")){var o=document.createElement("style");o.id="ngsteps-style",o.appendChild(document.createTextNode("#steps,#steps>#stepLeft,body{background-color:#DFDFDF}#steps{height:calc(100vh - "+i.vPadding+");overflow:hidden}#steps>#stepLeft{height:calc(100% - 24px);overflow:auto;padding:0}#steps>#stepLeft>ol{padding:0;color:#777}#steps>#stepLeft>ol>li{list-style-position:inside;padding:4px 10px;cursor:pointer}#steps>#stepLeft>ol>li.selecionado{background-color:#9C9C9C;color:#fff}#steps>#stepLeft>ol>li>.glyphicon{float:stepLeft;margin:0 10px 0 3px;height:14px;width:14px}#steps>#stepLeft>ol>li>.glyphicon-ok{color:#AAC11B}#steps>#stepLeft>ol>li>.glyphicon-remove{color:#8b0000}#steps>#stepRight{background-color:#DFDFDF;height:100%;padding:0}#steps>#stepRight>#stepContainer{background-color:#9C9C9C;height:calc(100% - 86px)}#steps>#stepRight>#stepContainer>step>.stepContent{height:100%;overflow:auto;padding:2.5%}#steps>#stepRight>#stepContainer>step>.stepContent>form>.step-subm{position:fixed;height:15px;top:-3000px;left:-3000px}#steps>#stepRight>#controles{bottom:0;position:absolute;width:100%;text-align:right;background-color:#DFDFDF;height:60px;padding:1px 26px 26px}#steps>#stepRight>#controles>.stepButton{background-color:#9c9c9c;color:#fff;padding:.5em 2%;outline:0;border:none;overflow:hidden;line-height:1.6;margin:0 4px}#steps>#stepRight>#controles>button:active{background-color:gray}#steps>#stepRight>#controles>button:disabled{background-color:#d3d3d3}#steps>#stepButton-menu{width:100%;height:26px;color:#fff;border:none;background-color:gray}.hidden-xs-p{display:none;}@media (max-width:767px){#steps>#stepRight>#stepContainer>step>.stepContent{height:100%}#steps>#stepRight>#controles{display:flex}#steps>#stepRight>#controles>.stepButton{width:calc(33.333333% - 11px)}#steps>#stepLeft{height:calc(100% - 84px);margin-bottom:24px}.hidden-xs-p{display:inline;}}")),document.head.appendChild(o)}s.steps.stepCarregado()},scope:{vm:"=",titulo:"<"},restrict:"EA",transclude:!0,template:'<div id="steps"> <button id="stepButton-menu" ng-click="$stepCore.menuVisivel=!$stepCore.menuVisivel"> &nbsp{{$stepCore.titulo}}&nbsp <span class="hidden-xs-p"> <span class="glyphicon glyphicon-chevron-down"></span> &nbsp{{$stepCore.stepLista[$stepCore.indiceSelecionado].nome()}}&nbsp </span> </button> <div id="stepLeft" ng-class="!$stepCore.menuVisivel ? \'hidden-xs\' : \'\'" class="col-sm-5 col-md-4 col-lg-3"> <ol> <li ng-repeat="item in $stepCore.stepLista" ng-click="$stepCore.trocaStep(item.id)" class="{{item.id===$stepCore.idSelecionado ? \'selecionado\' : \'\'}}" ng-show="item.visivel"> <span class="glyphicon {{item.status.classe}}"></span>{{item.nome()}}</li></ol> </div><div id="stepRight" class=" col-xs-12 col-sm-7 col-md-8 col-lg-9"> <div id="stepContainer" ng-transclude> </div><div id="controles" class="col-xs-12 col-sm-7 col-md-8 col-lg-9"> <button class="stepButton" ng-click="$stepCore.steps.anterior()" ng-disabled="$stepCore.idSelecionado===$stepCore.stepLista[0].id"> <span class="glyphicon glyphicon-backward">&nbsp</span>{{$stepCore.steps.btnAnterior}}&nbsp </button> <button class="stepButton" ng-click="$stepCore.steps.proximo()" ng-disabled="$stepCore.idSelecionado===$stepCore.stepLista[$stepCore.stepLista.length - 1].id"> <span class="glyphicon glyphicon-forward">&nbsp</span>{{$stepCore.steps.btnProximo}}&nbsp </button> <button class="stepButton" ng-click="$stepCore.steps.finalizarSteps()" ng-disabled="!$stepCore.steps.validarTudo() && !$stepCore.steps.finalizaVisivel"><span class="glyphicon glyphicon-ok">&nbsp</span>{{$stepCore.steps.btnFinalizar}}&nbsp</button> </div></div></div>'}}function t(){return{link:function(e,t,i,s){if("stepContainer"!==t.parent().attr("id"))throw"Você não pode inserir um step dentro do outro! Não nessa versão do ng-steps...";if(e.visivel=function(t){return s.idSelecionado===t&&!1!==e.mostrar},void 0!==i.jsInserted)return e.id=parseInt(i.jsInserted),void(s.forms["form"+e.id]=e.form);var o=new s.Step(e.titulo?function(){return e.titulo}:"Passo "+(s.stepLista.length+1),void 0===i.naoValidar||"false"===i.naoValidar,void 0!==i.liberado&&"false"!==i.liberado);Object.defineProperty(o,"visivel",{get:function(){return!1!==e.mostrar}}),e.id=o.id,s.stepLista.push(o),s.forms["form"+o.id]=e.form},restrict:"EA",require:"^ngSteps",transclude:!0,scope:{mostrar:"<",titulo:"<"},template:'<div class="stepContent" id="stepContent{{id}}" ng-show="visivel(id)"> <form name="form"> <input type="submit" value="" id="stepSid{{id}}" class="step-subm"> <div ng-transclude></div></form> </div>'}}function i(e,t,i){var s=this;s.steps={},s.vm?s.vm.steps?s.steps=s.vm.steps:s.vm.steps=s.steps:t.$parent.steps?s.steps=t.$parent.steps:t.$parent.steps=s.steps;var o={valido:{id:1,classe:"glyphicon-ok"},invalido:{id:2,classe:"glyphicon-remove"},selecionado:{id:3,classe:"glyphicon-chevron-right"},intocado:{id:4,classe:""}};function n(e,t,i){this.nome="function"==typeof e?e:function(){return e},this.validar=t,this.liberado=i,this.id=0;for(var n=0;n<s.stepLista.length;n++)s.stepLista[n].id>=this.id&&(this.id=s.stepLista[n].id+1);this.status=0===this.id?o.selecionado:o.intocado}function p(e){e.btnAnterior&&(this.btnAnterior=e.btnAnterior),e.btnProximo&&(this.btnProximo=e.btnProximo),e.btnFinalizar&&(this.btnFinalizar=e.btnFinalizar),e.todosLiberados&&(this.todosLiberados=e.todosLiberados),e.finalizaVisivel&&(this.finalizaVisivel=e.finalizaVisivel),e.stepMudando&&(this.stepMudando=e.stepMudando),e.stepMudado&&(this.stepMudado=e.stepMudado),e.stepFinalizando&&(this.stepFinalizando=e.stepFinalizando),e.stepFinalizado&&(this.stepFinalizado=e.stepFinalizado),e.stepCarregado&&(this.stepCarregado=e.stepCarregado),Object.defineProperty(this,"listaDeSteps",{get:function(){return s.stepLista}}),Object.defineProperty(this,"indiceSelecionado",{get:function(){return s.indiceSelecionado}})}s.enumStatus=o,s.stepLista=[],s.forms={},s.idSelecionado=0,s.menuVisivel=!1,Object.defineProperty(s,"indiceSelecionado",{get:function(){for(var e=0;e<s.stepLista.length;e++)if(s.stepLista[e].id===s.idSelecionado){if(!1!==s.stepLista[e].visivel)return e;for(var t=e+1;t<s.stepLista.length;t++)if(!1!==s.stepLista[t].visivel)return s.idSelecionado=s.stepLista[t].id,t;for(t=0;t<e;t++)if(!1!==s.stepLista[t].visivel)return s.idSelecionado=s.stepLista[t].id,t}}}),s.stepContainer=angular.element(document.getElementById("stepContainer")),s.trocaStep=function(e){if(e!==s.idSelecionado){for(var t=null,n=null,p=0;p<s.stepLista.length;p++)s.stepLista[p].id===s.idSelecionado?t=p:s.stepLista[p].id===e&&(n=p);if(null===t||null===n)throw"Steps: índice fora dos limites da matriz em $stepCore.trocaStep()";if(s.menuVisivel=!1,!1!==s.steps.stepMudando(t,n)){var a=s.stepLista[t],r=s.stepLista[n];if(s.steps.validarStep(a))a.status=o.valido;else if(a.status=o.invalido,!s.steps.todosLiberados&&!a.liberado){var d=document.getElementById("stepSid"+a.id);return void(null!=d&&d.click&&i(function(){d.click()}))}r.status=o.selecionado,s.idSelecionado=n,s.steps.stepMudado(n,t)}}},s.Step=n,s.enveloparStep=function(e,t){var i=angular.element('<step js-inserted="'+t.id+'"></step>');return i.append(e),i},s.exibeMenu=function(){return window.innerWidth<=767?s.menuVisivel:(s.menuVisivel=!1,!0)},s.podeAvancar=function(){for(var e=s.indiceSelecionado+1;e<s.stepLista.length;e++)if(!1!==s.stepLista[e].visivel)return e;return!1},s.podeVoltar=function(){for(var e=s.indiceSelecionado-1;e>=0;e--)if(!1!==s.stepLista[e].visivel)return e;return!1},p.prototype.btnAnterior="Anterior",p.prototype.btnProximo="Próximo",p.prototype.btnFinalizar="Finalizar",p.prototype.todosLiberados=!1,p.prototype.finalizaVisivel=!1,p.prototype.stepMudando=function(){},p.prototype.stepMudado=function(){},p.prototype.stepFinalizando=function(){},p.prototype.stepFinalizado=function(){},p.prototype.stepCarregado=function(){},s.steps=new p(s.steps),s.steps.inserir=function(i,o,p,a,r){if(!i)throw"Steps: o parâmetro html em steps.inserir() não pode ser nulo ou indefinido.";if(!o)throw"Steps: o parâmetro titulo em steps.inserir() não pode ser nulo ou indefinido.";if("string"==typeof i){var d=document.createElement("div");d.innerHTML=i,i=angular.element(d.firstChild)}else if(i instanceof HTMLElement)i=angular.element(d.firstChild);else if(i.__proto__!==angular.element.prototype)throw"Steps: o parâmetro html em steps.inserir() deve ser do tipo string, HTMLElement ou elemento jQuery.";if(0===(o=o.toString()).length)throw"Steps: o parâmetro titulo em steps.inserir() deve ser uma string não vazia.";if(!(r&&"number"==typeof r&&r>=0))throw"Steps: o parâmetro indice em steps.inserir() deve ser do tipo int e maior que 0;";void 0===p&&(p=!1),void 0===a&&(a=!1);var l=new n(o,!p,a),c=e(s.enveloparStep(i,l))(t.$parent);0===r?s.stepContainer.prepend(c):r>=s.stepLista.length?s.stepContainer.append(c):(r--,angular.element(document.getElementById("stepContent"+s.stepLista[r].id)).after(c)),s.stepLista.splice(r,0,l)},s.steps.remover=function(e){if(e===s.indiceSelecionado&&s.stepLista.length>1){var t=0;t=e===s.stepLista.length-1?e-1:e+1,s.idSelecionado=s.stepLista[t].id,s.stepLista[t].status=o.selecionado}angular.element(document.getElementById("stepContent"+s.stepLista[e].id)).remove(),s.stepLista.splice(e,1)},s.steps.proximo=function(){for(var e=s.indiceSelecionado+1;e<s.stepLista.length;e++)if(!1!==s.stepLista[e].visivel)return void i(s.trocaStep(s.stepLista[e].id))},s.steps.anterior=function(){for(var e=s.indiceSelecionado-1;e>=0;e--)if(!1!==s.stepLista[e].visivel)return void i(s.trocaStep(s.stepLista[e].id))},s.steps.irPara=function(e){i(s.trocaStep(s.stepLista[e].id))},s.steps.finalizarSteps=function(){!1!==s.steps.stepFinalizando()&&s.steps.stepFinalizado(s.steps.validarTudo())},s.steps.validarStep=function(e){return e instanceof n||(e=s.stepLista[e]),!(e.validar&&!1!==e.visivel&&!s.forms["form"+e.id].$valid)},s.steps.validarTudo=function(){for(var e=0;e<s.stepLista.length;e++)if(!s.steps.validarStep(s.stepLista[e]))return!1;return!0},s.vm?s.vm.steps=s.steps:t.$parent.steps=s.steps}angular.module("ng-steps",[]).directive("ngSteps",e).directive("step",t),e.$inject=[],t.$inject=[],i.$inject=["$compile","$scope","$timeout"]}();